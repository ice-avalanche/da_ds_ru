# Урок 2. Практика в Yandex DataLens

## 1. Цель занятия

Закрепление навыков работы в Yandex DataLens:
- создание датасета;
- построение визуализаций;
- настройка фильтров;
- сборка полноценного дашборда.

## 2. Подготовка данных

### Исходные данные:
Excel-файл с полями:
- Дата
- Регион
- Продукт
- Менеджер
- Выручка
- Себестоимость
- Количество

### Проверить:
- корректность типов данных (дата, число, текст);
- отсутствие пустых строк;
- корректность числовых форматов.

## 3. Создание датасета

1. Подключить Excel-файл как источник.
2. Создать датасет.
3. Проверить роли полей:
   - Dimension: Регион, Продукт, Менеджер.
   - Measure: Выручка, Себестоимость, Количество.
   - Дата: поле «Дата».
4. Установить агрегацию по умолчанию (SUM для числовых показателей).

## 4. Создание вычисляемых показателей

### 4.1 Прибыль

```
[Выручка] - [Себестоимость]
```

### 4.2 Маржинальность

```
([Выручка] - [Себестоимость]) / [Выручка]
```

### 4.3 Средний чек

```
SUM([Выручка]) / SUM([Количество])
```

## 5. Построение чартов

### 5.1 Выручка по регионам
Тип: столбчатая диаграмма  
Измерение: Регион  
Показатель: SUM(Выручка)

### 5.2 Динамика выручки по месяцам
Тип: линейный график  
Измерение: Дата (по месяцам)  
Показатель: SUM(Выручка)

### 5.3 Структура продаж по продуктам
Тип: круговая диаграмма  
Измерение: Продукт  
Показатель: SUM(Выручка)

### 5.4 KPI
Тип: KPI-индикатор  
Показатель: SUM(Выручка)

## 6. Сборка дашборда

1. Создать новый дашборд.
2. Добавить все построенные чарты.
3. Разместить KPI в верхней части.
4. Добавить фильтр по дате.
5. Добавить фильтр по региону.
6. Настроить применение фильтров ко всем графикам.

## 7. Проверка результата

Проверить:
- корректность агрегаций;
- работу фильтров;
- согласованность показателей;
- отсутствие дублирования данных.

## 8. Дополнительное задание

Добавить:
- сравнение прибыли по регионам;
- сортировку регионов по убыванию выручки;
- фильтр по менеджеру;
- сводную таблицу «Регион × Продукт».
